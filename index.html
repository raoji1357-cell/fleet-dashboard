<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fleet Day Wise Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  display: flex;
}

.sidebar {
  width: 260px;
  background: linear-gradient(180deg, #020617, #0f172a);
  color: #fff;
  padding: 30px 20px;
  box-shadow: 4px 0 20px rgba(0,0,0,0.3);
}

.sidebar h2 {
  color: #facc15;
  text-align: center;
  font-size: 24px;
  margin-bottom: 40px;
  letter-spacing: 1px;
}

.menu {
  margin-bottom: 12px;
  padding: 14px 18px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.menu:hover {
  background: rgba(255,255,255,0.1);
  transform: translateX(5px);
}

.menu.active {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  box-shadow: 0 4px 15px rgba(37,99,235,0.4);
}

.main {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

.card-box {
  background: #ffffff;
  padding: 40px;
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  margin-bottom: 30px;
}

.card-box h1 {
  color: #1e293b;
  font-size: 32px;
  margin-bottom: 10px;
  font-weight: 700;
}

.subtitle {
  color: #64748b;
  font-size: 14px;
  margin-bottom: 30px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: #eff6ff;
  color: #2563eb;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #10b981;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.form-group {
  margin-bottom: 24px;
}

label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #334155;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

input[type="date"],
input[type="text"] {
  width: 100%;
  padding: 14px 16px;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  font-size: 16px;
  transition: all 0.3s ease;
  background: #f8fafc;
}

input[type="date"]:focus,
input[type="text"]:focus {
  outline: none;
  border-color: #2563eb;
  background: #fff;
  box-shadow: 0 0 0 4px rgba(37,99,235,0.1);
}

input:disabled {
  background: #e2e8f0;
  cursor: not-allowed;
  opacity: 0.6;
}

.suggestions {
  background: #fff;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  max-height: 280px;
  overflow-y: auto;
  margin-top: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  display: none;
}

.suggestions.show {
  display: block;
}

.suggestions div {
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-bottom: 1px solid #f1f5f9;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.suggestions div:last-child {
  border-bottom: none;
}

.suggestions div:hover {
  background: linear-gradient(90deg, #eff6ff, #dbeafe);
  transform: translateX(4px);
}

.suggestion-name {
  font-weight: 600;
  color: #1e293b;
}

.suggestion-car {
  color: #64748b;
  font-size: 14px;
  background: #f1f5f9;
  padding: 4px 10px;
  border-radius: 6px;
}

.btn-search {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 10px;
}

.btn-search:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(37,99,235,0.4);
}

.btn-search:disabled {
  background: #94a3b8;
  cursor: not-allowed;
  transform: none;
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.6);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  backdrop-filter: blur(4px);
}

.loading-overlay.show {
  display: flex;
}

.loading-content {
  background: white;
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  min-width: 300px;
}

.spinner {
  border: 5px solid #f1f5f9;
  border-top: 5px solid #2563eb;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-content p {
  font-size: 16px;
  color: #334155;
  font-weight: 600;
  margin-bottom: 10px;
}

.loading-time {
  font-size: 13px;
  color: #64748b;
  font-family: 'Courier New', monospace;
}

.result {
  margin-top: 30px;
}

.result-card {
  background: linear-gradient(135deg, #0f172a, #1e293b);
  color: #fff;
  padding: 40px;
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 2px solid rgba(255,255,255,0.1);
}

.result-header h2 {
  font-size: 28px;
  font-weight: 700;
}

.result-car {
  background: rgba(250,204,21,0.2);
  color: #facc15;
  padding: 8px 16px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 16px;
}

.kpis {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.kpi {
  background: rgba(255,255,255,0.08);
  padding: 24px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.1);
  transition: all 0.3s ease;
}

.kpi:hover {
  background: rgba(255,255,255,0.12);
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.kpi-label {
  font-size: 13px;
  color: #cbd5e1;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
  display: block;
}

.kpi-value {
  font-size: 32px;
  font-weight: 700;
  color: #fff;
  display: block;
}

.kpi-earnings {
  grid-column: span 2;
  background: linear-gradient(135deg, rgba(34,197,94,0.2), rgba(22,163,74,0.2));
  border: 1px solid rgba(34,197,94,0.3);
}

.kpi-earnings .kpi-value {
  color: #4ade80;
  font-size: 36px;
}

.error-message {
  background: #fee2e2;
  color: #991b1b;
  padding: 20px;
  border-radius: 12px;
  margin-top: 20px;
  border-left: 4px solid #dc2626;
  box-shadow: 0 4px 12px rgba(220,38,38,0.1);
}

.error-message strong {
  display: block;
  margin-bottom: 8px;
  font-size: 16px;
}

.empty-state {
  text-align: center;
  padding: 60px 40px;
  color: #64748b;
  background: white;
  border-radius: 20px;
}

.empty-state svg {
  width: 80px;
  height: 80px;
  margin-bottom: 20px;
  opacity: 0.5;
}

@media (max-width: 768px) {
  body {
    flex-direction: column;
  }
  
  .sidebar {
    width: 100%;
    padding: 20px;
  }
  
  .main {
    padding: 20px;
  }
  
  .card-box {
    padding: 24px;
  }
  
  .kpis {
    grid-template-columns: 1fr;
  }
  
  .kpi-earnings {
    grid-column: span 1;
  }
}
</style>
</head>

<body>
<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-content">
    <div class="spinner"></div>
    <p id="loadingText">Loading data...</p>
    <div class="loading-time" id="loadingTime">‚è±Ô∏è 0.0s</div>
  </div>
</div>

<div class="sidebar">
  <h2>üìä Fleet Reports</h2>
  <div class="menu active">üìÖ Day Wise</div>
  <div class="menu">üìÜ Month Wise</div>
  <div class="menu">üíº Scheme Wise</div>
</div>

<div class="main">
  <div class="container">
    <div class="card-box">
      <h1>üìã Day Wise Report</h1>
      <div class="subtitle">
        <span>‚ö° Optimized API - Date-specific loading</span>
        <span class="status-badge" id="statusBadge">
          <span class="status-dot"></span>
          <span id="statusText">Ready</span>
        </span>
      </div>

      <div class="form-group">
        <label for="dateInput">Select Date</label>
        <input type="date" id="dateInput" max="">
      </div>

      <div class="form-group">
        <label for="searchInput">Search Driver / Car Number</label>
        <input 
          type="text" 
          id="searchInput" 
          placeholder="First select a date above..." 
          disabled
          autocomplete="off"
        >
        <div class="suggestions" id="suggestions"></div>
      </div>

      <button class="btn-search" id="searchBtn" disabled>
        üîç Search Records
      </button>
    </div>

    <div class="result" id="result"></div>
  </div>
</div>

<script>
// ========================================
// CONFIGURATION
// ========================================
const CONFIG = {
  // ‚úÖ Your API URL - automatically adds ?date parameter
  API_BASE_URL: "https://script.google.com/macros/s/AKfycbwreiHA23SwJye28ceTyovol42OD1npKj4pqO3UbmjCX5Fi4TYBAPzrCFWiWO75dUqysA/exec",
  MAX_SUGGESTIONS: 10,
  DEBOUNCE_DELAY: 300,
  API_TIMEOUT: 15000 // 15 seconds
};

// ========================================
// STATE
// ========================================
const AppState = {
  currentDateData: null,
  driversIndex: [],
  selectedDate: null,
  selectedDriver: null,
  isLoading: false,
  loadStartTime: null
};

// ========================================
// DOM ELEMENTS
// ========================================
const DOM = {
  dateInput: document.getElementById("dateInput"),
  searchInput: document.getElementById("searchInput"),
  suggestionsBox: document.getElementById("suggestions"),
  searchBtn: document.getElementById("searchBtn"),
  result: document.getElementById("result"),
  loadingOverlay: document.getElementById("loadingOverlay"),
  loadingText: document.getElementById("loadingText"),
  loadingTime: document.getElementById("loadingTime"),
  statusBadge: document.getElementById("statusBadge"),
  statusText: document.getElementById("statusText")
};

// ========================================
// UTILITIES
// ========================================
const Utils = {
  formatCurrency: (amount) => {
    return new Intl.NumberFormat('en-IN', {
      style: 'currency',
      currency: 'INR',
      maximumFractionDigits: 2
    }).format(amount);
  },

  debounce: (func, wait) => {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  },

  showLoading: (message = 'Loading data...') => {
    DOM.loadingText.textContent = message;
    DOM.loadingTime.textContent = '‚è±Ô∏è 0.0s';
    DOM.loadingOverlay.classList.add('show');
    AppState.isLoading = true;
    AppState.loadStartTime = Date.now();
    
    // Update timer
    const timerInterval = setInterval(() => {
      if (!AppState.isLoading) {
        clearInterval(timerInterval);
        return;
      }
      const elapsed = ((Date.now() - AppState.loadStartTime) / 1000).toFixed(1);
      DOM.loadingTime.textContent = `‚è±Ô∏è ${elapsed}s`;
    }, 100);
  },

  hideLoading: () => {
    DOM.loadingOverlay.classList.remove('show');
    AppState.isLoading = false;
  },

  updateStatus: (text, type = 'success') => {
    DOM.statusText.textContent = text;
    const badge = DOM.statusBadge;
    
    if (type === 'success') {
      badge.style.background = '#dcfce7';
      badge.style.color = '#16a34a';
    } else if (type === 'loading') {
      badge.style.background = '#fef3c7';
      badge.style.color = '#d97706';
    } else if (type === 'error') {
      badge.style.background = '#fee2e2';
      badge.style.color = '#dc2626';
    } else {
      badge.style.background = '#eff6ff';
      badge.style.color = '#2563eb';
    }
  },

  showError: (message, details = '') => {
    DOM.result.innerHTML = `
      <div class="error-message">
        <strong>‚ö†Ô∏è Error</strong>
        <div>${message}</div>
        ${details ? `<div style="margin-top:8px;opacity:0.8;font-size:13px">${details}</div>` : ''}
      </div>
    `;
  },

  showEmpty: (message) => {
    DOM.result.innerHTML = `
      <div class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        <h3>${message}</h3>
      </div>
    `;
  }
};

// ========================================
// API FUNCTIONS
// ========================================
const API = {
  async fetchDateData(date) {
    try {
      Utils.showLoading(`Fetching data for ${date}...`);
      Utils.updateStatus('Loading...', 'loading');
      
      const startTime = Date.now();
      
      // üéØ AUTOMATIC DATE PARAMETER - No changes needed in backend!
      const url = `${CONFIG.API_BASE_URL}?date=${date}`;
      
      console.log(`üì° Requesting: ${url}`);
      
      // Fetch with timeout
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), CONFIG.API_TIMEOUT);
      
      const response = await fetch(url, {
        signal: controller.signal
      });
      
      clearTimeout(timeout);
      
      const loadTime = Date.now() - startTime;
      console.log(`‚úÖ Response in ${loadTime}ms`);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }
      
      const data = await response.json();
      
      // Check for API errors
      if (data.error) {
        throw new Error(data.error);
      }
      
      console.log(`üìä Received:`, data);
      console.log(`üöó Total cars: ${data.totalCars || data.records?.length || 0}`);
      
      AppState.currentDateData = data;
      
      Utils.hideLoading();
      Utils.updateStatus(`${data.totalCars || 0} cars ‚Ä¢ ${loadTime}ms`, 'success');
      
      return data;
      
    } catch (error) {
      Utils.hideLoading();
      
      let errorMessage = "Failed to load data";
      let errorDetails = "";
      
      if (error.name === 'AbortError') {
        errorMessage = "Request timed out";
        errorDetails = "The server took too long to respond (>15s). Please try again.";
      } else if (error.message.includes('HTTP')) {
        errorMessage = "Server error";
        errorDetails = error.message;
      } else if (error.message.includes('Missing date parameter')) {
        errorMessage = "Backend configuration issue";
        errorDetails = "The backend is not receiving the date parameter correctly.";
      } else {
        errorMessage = "Network error";
        errorDetails = error.message || "Check your internet connection.";
      }
      
      Utils.showError(errorMessage, errorDetails);
      Utils.updateStatus('Error', 'error');
      
      console.error('‚ùå API Error:', error);
      return null;
    }
  }
};

// ========================================
// DRIVER MANAGER
// ========================================
const DriverManager = {
  loadDriversFromData() {
    if (!AppState.currentDateData || !AppState.currentDateData.records) {
      console.warn('‚ö†Ô∏è No data loaded');
      return [];
    }

    const uniqueDrivers = new Map();
    
    AppState.currentDateData.records.forEach(record => {
      // Driver 1
      if (record.SH_Driver1_UUID && record.SH_Driver1_Name) {
        const key = `${record.SH_Driver1_UUID}_${record.CarNumber}`;
        if (!uniqueDrivers.has(key)) {
          uniqueDrivers.set(key, {
            uuid: record.SH_Driver1_UUID,
            name: record.SH_Driver1_Name.trim(),
            car: record.CarNumber.trim(),
            type: 'driver1'
          });
        }
      }
      
      // Driver 2
      if (record.SH_Driver2_UUID && record.SH_Driver2_Name) {
        const key = `${record.SH_Driver2_UUID}_${record.CarNumber}`;
        if (!uniqueDrivers.has(key)) {
          uniqueDrivers.set(key, {
            uuid: record.SH_Driver2_UUID,
            name: record.SH_Driver2_Name.trim(),
            car: record.CarNumber.trim(),
            type: 'driver2'
          });
        }
      }
    });

    AppState.driversIndex = Array.from(uniqueDrivers.values());
    console.log(`‚úÖ Loaded ${AppState.driversIndex.length} unique drivers`);
    
    return AppState.driversIndex;
  },

  filterDrivers(query) {
    if (!query) return [];
    
    const lowerQuery = query.toLowerCase();
    
    return AppState.driversIndex
      .filter(driver => 
        driver.name.toLowerCase().includes(lowerQuery) || 
        driver.car.toLowerCase().includes(lowerQuery)
      )
      .slice(0, CONFIG.MAX_SUGGESTIONS);
  }
};

// ========================================
// UI FUNCTIONS
// ========================================
const UI = {
  updateSuggestions(drivers) {
    DOM.suggestionsBox.innerHTML = "";
    
    if (drivers.length === 0) {
      DOM.suggestionsBox.classList.remove("show");
      return;
    }

    drivers.forEach(driver => {
      const div = document.createElement("div");
      div.innerHTML = `
        <span class="suggestion-name">${driver.name}</span>
        <span class="suggestion-car">${driver.car}</span>
      `;
      
      div.onclick = () => {
        DOM.searchInput.value = `${driver.name} | ${driver.car}`;
        AppState.selectedDriver = driver;
        DOM.suggestionsBox.classList.remove("show");
        DOM.searchBtn.disabled = false;
        console.log(`‚úÖ Selected: ${driver.name} | ${driver.car}`);
      };
      
      DOM.suggestionsBox.appendChild(div);
    });

    DOM.suggestionsBox.classList.add("show");
  },

  displayResults(record, driver) {
    const isDriver1 = driver.type === 'driver1';
    
    const trips = isDriver1 ? record.SH_Driver1_Trips : record.SH_Driver2_Trips;
    const onlineHours = isDriver1 ? record.SH_Driver1_Online_Hours : record.SH_Driver2_Online_Hours;
    const ar = isDriver1 ? record.Driver_1_AR : record.Driver_2_AR;
    const cash = isDriver1 ? record.Cash_Driver_1 : record.Cash_Driver_2;
    const earnings = isDriver1 ? record.Total_Earning_Driver_1 : record.Total_Earning_Driver_2;

    DOM.result.innerHTML = `
      <div class="result-card">
        <div class="result-header">
          <h2>${driver.name}</h2>
          <div class="result-car">${driver.car}</div>
        </div>
        
        <div class="kpis">
          <div class="kpi">
            <span class="kpi-label">üöó Trips</span>
            <span class="kpi-value">${trips || 0}</span>
          </div>
          
          <div class="kpi">
            <span class="kpi-label">‚è±Ô∏è Online Hours</span>
            <span class="kpi-value">${(onlineHours || 0).toFixed(2)}</span>
          </div>
          
          <div class="kpi">
            <span class="kpi-label">‚úÖ Acceptance Rate</span>
            <span class="kpi-value">${ar || 0}%</span>
          </div>
          
          <div class="kpi">
            <span class="kpi-label">üíµ Cash</span>
            <span class="kpi-value">${Utils.formatCurrency(cash || 0)}</span>
          </div>
          
          <div class="kpi kpi-earnings">
            <span class="kpi-label">üí∞ Total Earnings</span>
            <span class="kpi-value">${Utils.formatCurrency(earnings || 0)}</span>
          </div>
        </div>
      </div>
    `;
  }
};

// ========================================
// EVENT HANDLERS
// ========================================
const EventHandlers = {
  async onDateChange() {
    const date = DOM.dateInput.value;
    
    // Reset UI
    DOM.searchInput.value = "";
    DOM.searchInput.disabled = true;
    DOM.searchBtn.disabled = true;
    DOM.suggestionsBox.innerHTML = "";
    DOM.suggestionsBox.classList.remove("show");
    DOM.result.innerHTML = "";
    AppState.selectedDriver = null;
    AppState.driversIndex = [];

    if (!date) {
      Utils.updateStatus('Select a date', 'default');
      return;
    }

    console.log(`üìÖ Date selected: ${date}`);

    // üéØ AUTOMATIC API CALL with date parameter
    const data = await API.fetchDateData(date);
    
    if (!data || !data.records || data.records.length === 0) {
      Utils.showEmpty(`No drivers found for ${date}`);
      Utils.updateStatus('No data', 'error');
      return;
    }

    AppState.selectedDate = date;
    
    // Load drivers from fetched data
    const drivers = DriverManager.loadDriversFromData();
    
    if (drivers.length === 0) {
      Utils.showEmpty("No drivers found for the selected date.");
      return;
    }

    DOM.searchInput.disabled = false;
    DOM.searchInput.placeholder = `Search from ${drivers.length} drivers...`;
  },

  onSearchInput: Utils.debounce(() => {
    const query = DOM.searchInput.value.trim();
    
    if (!query) {
      DOM.suggestionsBox.classList.remove("show");
      DOM.searchBtn.disabled = true;
      AppState.selectedDriver = null;
      return;
    }

    const filtered = DriverManager.filterDrivers(query);
    UI.updateSuggestions(filtered);
  }, CONFIG.DEBOUNCE_DELAY),

  onSearch() {
    if (!AppState.selectedDate || !AppState.selectedDriver) {
      alert("‚ö†Ô∏è Please select a date and choose a driver from suggestions.");
      return;
    }

    if (!AppState.currentDateData || !AppState.currentDateData.records) {
      Utils.showError("No data available. Please select a date first.");
      return;
    }

    console.log(`üîç Searching for: ${AppState.selectedDriver.name}`);

    const record = AppState.currentDateData.records.find(r => {
      if (AppState.selectedDriver.type === 'driver1') {
        return r.SH_Driver1_UUID === AppState.selectedDriver.uuid && 
               r.CarNumber === AppState.selectedDriver.car;
      } else {
        return r.SH_Driver2_UUID === AppState.selectedDriver.uuid && 
               r.CarNumber === AppState.selectedDriver.car;
      }
    });

    if (!record) {
      Utils.showError("No matching record found for this driver.");
      return;
    }

    UI.displayResults(record, AppState.selectedDriver);
    console.log(`‚úÖ Results displayed for ${AppState.selectedDriver.name}`);
  }
};

// ========================================
// INITIALIZATION
// ========================================
function init() {
  console.log("üöÄ Fleet Report System Initialized");
  console.log(`üì° API URL: ${CONFIG.API_BASE_URL}`);
  console.log(`‚ö° Date parameter will be added automatically`);
  
  // Set max date to today
  const today = new Date().toISOString().split('T')[0];
  DOM.dateInput.max = today;

  // Attach event listeners
  DOM.dateInput.addEventListener("change", EventHandlers.onDateChange);
  DOM.searchInput.addEventListener("input", EventHandlers.onSearchInput);
  DOM.searchBtn.addEventListener("click", EventHandlers.onSearch);

  // Close suggestions on outside click
  document.addEventListener("click", (e) => {
    if (!DOM.searchInput.contains(e.target) && !DOM.suggestionsBox.contains(e.target)) {
      DOM.suggestionsBox.classList.remove("show");
    }
  });

  console.log("‚úÖ System Ready! Select a date to load data.");
}

// Start the application
init();
</script>
</body>
</html>
